---
import type { MarkdownLayoutProps } from "astro";
import { Picture } from "@astrojs/image/components";
import type { BlogPostFrontmatter } from "@types";
import { formatDate } from "@utils/formatDate";
import Base from "./Base.astro";

type Props = MarkdownLayoutProps<BlogPostFrontmatter>;

const { title, date, draft } = Astro.props.frontmatter;
const { url } = Astro.props;

const slug = url?.split("/")[2];
---

<Base title="blog post">
  <div class="mb-8">
    {draft && <p class="bg-red-700 text-white inline-block px-2 mb-4">DRAFT</p>}
    <h1 class="text-4xl mb-2">{title}</h1>
    <p>{formatDate(date)}</p>
  </div>

  <Picture
    class="mb-8"
    src={`/images/${slug}.jpg`}
    widths={[400, 600, 1024]}
    sizes="(max-width:400px) 400px, (max-width:600px) 600px,1024px,"
    aspectRatio="4:3"
    alt="image"
  />

  <div class="prose">
    <slot />
  </div>
</Base>
